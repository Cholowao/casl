{"title":"Installation","categories":["guide"],"order":0,"meta":{"keywords":null,"description":null},"content":"<h2 id=\"requirements\"><a name=\"requirements\" class=\"h-link\" href=\"#\"></a>Requirements</h2>\n<p>CASL is isomorphic, so can be used in browsers and in Nodejs environments. It requires ES5 compatible environment and  <code>Map</code> class from ES6, that means the lowest supported version of Internet Explorer is IE11 and the lowest Nodejs version is 8.x. But we strongly recommend to use the latest Node.js environment and browsers because their JS VM works much faster.</p>\n<p>Additionally, <code>@casl/vue</code> and <code>@casl/aurelia</code> use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\" target=\"_blank\" rel=\"noopener nofollow\">ES6 WeakMap</a>, so it requires either polyfill or newer versions of browsers.</p>\n<h2 id=\"semantic-versioning\"><a name=\"semantic-versioning\" class=\"h-link\" href=\"#\"></a>Semantic Versioning</h2>\n<p>CASL follows <a href=\"https://semver.org/\" target=\"_blank\" rel=\"noopener nofollow\">Semantic Versioning</a> in all its official projects. Changes can be found in <a href=\"https://github.com/stalniy/casl/releases\" target=\"_blank\" rel=\"noopener nofollow\">release notes</a> or in <code>CHANGELOG.md</code> file inside each package.</p>\n<h2 id=\"official-packages-and-its-versions\"><a name=\"official-packages-and-its-versions\" class=\"h-link\" href=\"#\"></a>Official packages and its versions</h2>\n<div class=\"responsive\"><table>\n<thead>\n<tr>\n<th>Project</th>\n<th>Status</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;guide/intro&quot;}\">@casl/ability</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/ability\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/ability.svg\" alt=\"@casl/ability-status\"></a></td>\n<td>CASL's core package</td>\n</tr>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;package/casl-mongoose&quot;}\">@casl/mongoose</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/mongoose\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/mongoose.svg\" alt=\"@casl/mongoose-status\"></a></td>\n<td>integration with <a href=\"http://mongoosejs.com/\" target=\"_blank\" rel=\"noopener nofollow\">Mongoose</a></td>\n</tr>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;package/casl-prisma&quot;}\">@casl/prisma</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/prisma\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/prisma.svg\" alt=\"@casl/prisma-status\"></a></td>\n<td>integration with <a href=\"https://www.prisma.io/\" target=\"_blank\" rel=\"noopener nofollow\">Prisma</a></td>\n</tr>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;package/casl-angular&quot;}\">@casl/angular</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/angular\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/angular.svg\" alt=\"@casl/angular-status\"></a></td>\n<td>integration with  <a href=\"https://angular.io/\" target=\"_blank\" rel=\"noopener nofollow\">Angular</a></td>\n</tr>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;package/casl-react&quot;}\">@casl/react</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/react\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/react.svg\" alt=\"@casl/react-status\"></a></td>\n<td>integration with  <a href=\"https://reactjs.org/\" target=\"_blank\" rel=\"noopener nofollow\">React</a></td>\n</tr>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;package/casl-vue&quot;}\">@casl/vue</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/vue\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/vue.svg\" alt=\"@casl/vue-status\"></a></td>\n<td>integration with  <a href=\"https://vuejs.org\" target=\"_blank\" rel=\"noopener nofollow\">Vue</a></td>\n</tr>\n<tr>\n<td><app-link to=\"page\" params=\"{&quot;id&quot;:&quot;package/casl-aurelia&quot;}\">@casl/aurelia</app-link></td>\n<td><a href=\"https://www.npmjs.com/package/@casl/aurelia\" target=\"_blank\" rel=\"noopener nofollow\"><img src=\"https://img.shields.io/npm/v/@casl/aurelia.svg\" alt=\"@casl/aurelia-status\"></a></td>\n<td>integration with  <a href=\"http://aurelia.io\" target=\"_blank\" rel=\"noopener nofollow\">Aurelia</a></td>\n</tr>\n</tbody>\n</table>\n</div><h2 id=\"3rd-party-packages\"><a name=\"3rd-party-packages\" class=\"h-link\" href=\"#\"></a>3rd party packages</h2>\n<p>There are also 3rd party packages which we can utilize in our projects. To find them, just <a href=\"https://www.npmjs.com/search?q=keywords:casl\" target=\"_blank\" rel=\"noopener nofollow\">search on NPM using &quot;casl&quot; keyword</a></p>\n<blockquote>\n<p>Add &quot;casl&quot; in <a href=\"https://docs.npmjs.com/cli/v7/configuring-npm/package-json#keywords\" target=\"_blank\" rel=\"noopener nofollow\">package.json#keywords</a> array to show up your CASL based package in that list</p>\n</blockquote>\n<h2 id=\"npm-yarn-pnpm\"><a name=\"npm-yarn-pnpm\" class=\"h-link\" href=\"#\"></a>NPM, YARN, PNPM</h2>\n<p>Installation through package manager is the recommended way to install CASL. To install the latest stable version run:</p>\n<pre><code class=\"hljs language-sh\">npm install @casl/ability\n<span class=\"hljs-comment\"># or</span>\nyarn add @casl/ability\n<span class=\"hljs-comment\"># or</span>\npnpm add @casl/ability\n</code></pre>\n<h2 id=\"cdn\"><a name=\"cdn\" class=\"h-link\" href=\"#\"></a>CDN</h2>\n<p>For prototyping or learning purposes, you can use the latest version with:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@casl/ability&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>For production, we recommend linking to a specific version number to avoid unexpected breakage from newer versions:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@casl/ability@5.1.0&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<p>Remember that CASL depends on <a href=\"https://www.npmjs.com/package/@ucast/mongo\" target=\"_blank\" rel=\"noopener nofollow\">@ucast/mongo2js</a> which depends on <a href=\"https://www.npmjs.com/package/@ucast/core\" target=\"_blank\" rel=\"noopener nofollow\">@ucast/core</a>, <a href=\"https://www.npmjs.com/package/@ucast/js\" target=\"_blank\" rel=\"noopener nofollow\">@ucast/js</a> and <a href=\"https://www.npmjs.com/package/@ucast/mongo\" target=\"_blank\" rel=\"noopener nofollow\">@ucast/mongo</a>, that's why you need to specify all these libraries before <code>@casl/ability</code>:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@ucast/core&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@ucast/mongo&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@ucast/js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@ucast/mongo2js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/@casl/ability&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>\n<h2 id=\"download-and-use-and-lt-script-and-gt-tag\"><a name=\"download-and-use-and-lt-script-and-gt-tag\" class=\"h-link\" href=\"#\"></a>Download and use &lt;script&gt; tag</h2>\n<p>Simply <a href=\"https://cdn.jsdelivr.net/npm/@casl/ability\" target=\"_blank\" rel=\"noopener nofollow\">download CASL from CDN</a> and include with a script tag. <code>casl</code> will be registered as a global variable.</p>\n<blockquote>\n<p>Hopefully, you know what you are doing</p>\n</blockquote>\n<h2 id=\"explanation-of-different-builds\"><a name=\"explanation-of-different-builds\" class=\"h-link\" href=\"#\"></a>Explanation of Different Builds</h2>\n<p>In the <code>dist/</code> <a href=\"https://cdn.jsdelivr.net/npm/@casl/ability/dist/\" target=\"_blank\" rel=\"noopener nofollow\">directory of the NPM package</a> you will find many different builds of CASL.js. Hereâ€™s an overview of the difference between them:</p>\n<div class=\"responsive\"><table>\n<thead>\n<tr>\n<th>Build</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>es6m/index.mjs</td>\n<td>minified ES6 code with ES modules support. Intended for bundlers (e.g., <a href=\"https://rollupjs.org/guide/en/\" target=\"_blank\" rel=\"noopener nofollow\">rollup</a>, <a href=\"https://webpack.js.org/\" target=\"_blank\" rel=\"noopener nofollow\">webpack</a>) to create bundle for modern browsers or modern Nodejs version that support ES modules</td>\n</tr>\n<tr>\n<td>es6c/index.js</td>\n<td>minified ES6 code with Commonjs modules support. Intended for modern nodejs environments that support ES6 but doesn't support ES modules</td>\n</tr>\n<tr>\n<td>es5m/index.js</td>\n<td>minified ES5 code with ES modules support. Should be used by bundlers (e.g., <a href=\"https://rollupjs.org/guide/en/\" target=\"_blank\" rel=\"noopener nofollow\">rollup</a>, <a href=\"https://webpack.js.org/\" target=\"_blank\" rel=\"noopener nofollow\">webpack</a>) to tree shake the module and skip babel's transpile process</td>\n</tr>\n<tr>\n<td>umd/index.js</td>\n<td><strong>deprecated</strong>, minified ES5 code with UMD. Intended for AMD apps and simple prototypes in a browser</td>\n</tr>\n<tr>\n<td>types</td>\n<td>contains <a href=\"http://www.typescriptlang.org/\" target=\"_blank\" rel=\"noopener nofollow\">typescript</a> type declaration files</td>\n</tr>\n</tbody>\n</table>\n</div><p>All official packages has the same directory layout (except of <code>@casl/mongoose</code> which does not have es5m version and packages that integrate CASL with UI frameworks which don't have es6c version).</p>\n<h2 id=\"webpack\"><a name=\"webpack\" class=\"h-link\" href=\"#\"></a>Webpack</h2>\n<p>Webpack runs ESM JavaScript in a strict mode. The issue is that webpack4 reads only <code>main</code> property of <code>package.json</code> and ignores everything else in <code>resolve.mainFields</code>. All casl related packages, including ucast, distribute CommonJS file in <code>main</code> property. And this results to the next issue:</p>\n<blockquote>\n<p>ERROR in ./node_modules/@casl/ability/dist/es6m/index.mjs\nCan't import the named export 'xxx' from non EcmaScript module (only default export is available)</p>\n</blockquote>\n<p>The best way to fix it is to upgrade to webpack 5 which reads <code>exports</code> property of package.json when import packages and properly and works with ESM imports. But if you stuck with webpack 4, read <a href=\"https://github.com/stalniy/casl/issues/427#issuecomment-757539486\" target=\"_blank\" rel=\"noopener nofollow\">this comment</a> for possible workarounds.</p>\n<h2 id=\"csp-environments\"><a name=\"csp-environments\" class=\"h-link\" href=\"#\"></a>CSP environments</h2>\n<p>Some environments, such as Google Chrome Apps, enforce Content Security Policy (CSP), which prohibits the use of <code>new Function()</code> for evaluating expressions.</p>\n<p>CASL doesn't use any of the prohibited functions, so feel free to use it in any environments.</p>\n<h2 id=\"dev-build\"><a name=\"dev-build\" class=\"h-link\" href=\"#\"></a>Dev build</h2>\n<p><strong>Important</strong>: the built files in GitHub's <code>/dist</code> folder are not checked-in during releases. To use CASL from the latest source code on GitHub, you will have to build it yourself! Navigate your project root and run this:</p>\n<pre><code class=\"hljs language-sh\">git <span class=\"hljs-built_in\">clone</span> git@github.com:stalniy/casl.git\n<span class=\"hljs-built_in\">cd</span> casl\npnpm i -r\n<span class=\"hljs-built_in\">cd</span> packages/casl-ability\nnpm run build\n</code></pre>","headings":[{"id":"requirements","title":"Requirements"},{"id":"semantic-versioning","title":"Semantic Versioning"},{"id":"official-packages-and-its-versions","title":"Official packages and its versions"},{"id":"3rd-party-packages","title":"3rd party packages"},{"id":"npm-yarn-pnpm","title":"NPM, YARN, PNPM"},{"id":"cdn","title":"CDN"},{"id":"download-and-use-and-lt-script-and-gt-tag","title":"Download and use &lt;script&gt; tag"},{"id":"explanation-of-different-builds","title":"Explanation of Different Builds"},{"id":"webpack","title":"Webpack"},{"id":"csp-environments","title":"CSP environments"},{"id":"dev-build","title":"Dev build"}],"id":"guide/install"}